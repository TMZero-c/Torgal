<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Slideshow</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: #000; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        .slide-container {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        
        #display {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            animation: slideIn 0.3s ease-in-out;
        }
        
        @keyframes slideIn {
            from { opacity: 0.8; }
            to { opacity: 1; }
        }
        
        .slide-info {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 15px;
            border-radius: 6px;
            font-size: 12px;
            backdrop-filter: blur(10px);
        }
    </style>
</head>
<body>
    <div class="slide-container">
        <img id="display" src="" alt="Slide">
        <div class="slide-info" id="slide-info">â€”</div>
    </div>

    <script>
        let slides = [];
        let currentSlide = 0;

        window.api.onSlidesLoaded(data => {
            if (data.status === 'success' && data.slides && data.slides.length > 0) {
                slides = data.slides;
                currentSlide = 0;
                displaySlide(0);
            }
        });

        function displaySlide(idx) {
            if (!slides.length) return;
            currentSlide = Math.max(0, Math.min(idx, slides.length - 1));
            document.getElementById('display').src = slides[currentSlide].image;
            document.getElementById('slide-info').textContent = `${currentSlide + 1} / ${slides.length}`;
        }

        window.api.onTranscript(msg => {
            if ((msg.type === 'slide_transition' || msg.type === 'slide_set') && slides.length) {
                const idx = msg.to_slide ?? msg.current_slide ?? 0;
                displaySlide(idx);
            }
        });
    </script>
</body>
</html>